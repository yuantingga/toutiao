<template>
  <div class="User">
    <div class="header">
      <div class="headerMain">
        <div class="img">
          <van-image round width="2rem" height="2rem" :src="user.photo" />
          <div class="text">
            <div>{{ user.name }}</div>
          </div>
        </div>
        <!-- <div class="text">
          <div>{{ user.name }}</div>
        </div> -->
        <div class="edit" @click.prevent="redirect('Edit','个人信息')">
          个人信息
          <van-icon name="arrow" />
        </div>
      </div>
      <div class="headerFloot">
        <div @click="dynamic('dynamic','动态')">
          <div>{{ user.art_count }}</div>
          <div>动态</div>
        </div>
        <div @click="redirect('attention','关注')">
          <div>{{ user.follow_count }}</div>
          <div>关注</div>
        </div>
        <div @click="redirect('fans','粉丝')">
          <div>{{ user.fans_count }}</div>
          <div>粉丝</div>
          <!--@click.prevent="FansEvent"-->
        </div>
        <div>
          <div>{{ user.like_count }}</div>
          <div>被赞</div>
          <!--@click.prevent="FansEvent"-->
        </div>
      </div>
    </div>
    <div class="UserMain">
      <div class="panel1">
      <!-- Information -->
        <div @click="redirect('Information','消息')">
          <span class="van-icon">
            <svg t="1657185560698" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="15328" width="200" height="200">
              <path
                d="M510.587286 0h2.335436a45.900289 45.900289 0 0 1 45.900289 45.900289V122.3858h-94.136014V45.900289A45.900289 45.900289 0 0 1 510.587286 0zM511.755004 1023.998619a116.771772 116.771772 0 0 1-82.402696-33.470832A114.3016 114.3016 0 0 1 394.983232 908.349652v-1.998594a28.485576 28.485576 0 0 1 11.677177-23.26453 28.844873 28.844873 0 0 1 26.015403-4.008415 24.252599 24.252599 0 0 0-7.129815-1.044209v55.612556a27.621015 27.621015 0 0 0 25.57751-27.295402V908.349652c0 33.36978 26.632947 59.508692 60.631497 59.508692a60.698866 60.698866 0 0 0 60.631497-60.631497v-0.875789a27.609787 27.609787 0 0 0 25.577509 27.295402V878.033904a24.353651 24.353651 0 0 0-7.174727 1.055437 28.844873 28.844873 0 0 1 26.049088 3.997187 28.496804 28.496804 0 0 1 11.688405 23.26453v0.875789a116.906509 116.906509 0 0 1-116.771772 116.771772z"
                fill="black"
                p-id="15329"
              ></path>
              <path
                d="M511.755004 920.700513c-81.11147 0-175.157659-1.122806-257.313337-9.218234-107.474943-10.62174-170.408191-30.719959-198.062891-63.247634C42.972478 832.459228 37.583012 813.62978 40.816692 793.823491c3.514381-21.512953 22.557163-44.811168 50.941685-62.326934a129.706492 129.706492 0 0 0 61.978864-111.090376v-189.75413A350.405141 350.405141 0 0 1 504.142383 80.280593h15.225242a350.405141 350.405141 0 0 1 350.393914 350.393914v189.75413a129.71772 129.71772 0 0 0 61.990091 111.090376c26.947332 16.639978 45.406255 38.646965 50.526248 60.373252 4.592275 19.402079 0.381754 38.051879-12.171212 53.894664C944.046351 878.730043 880.439419 899.367208 769.944129 910.595263c-88.690407 9.06104-189.832726 10.10525-258.189125 10.10525zM96.171003 803.176461c-0.392982 2.818242 0 5.198589 2.986663 8.690514 7.769814 9.139637 38.995035 31.708027 160.808204 43.789415 79.775331 7.859639 172.047487 8.982444 251.789134 8.982444 67.132541 0 166.343635-1.021753 252.485273-9.802092 44.597835-4.55859 81.246206-10.756477 108.912134-18.447695 37.973282-10.531916 49.650459-21.254708 52.906595-25.364176 2.099646-2.661049 2.088418-3.98596 1.571928-6.164202-0.763508-3.031575-7.073675-14.237174-25.39786-25.532597a186.666415 186.666415 0 0 1-88.701635-158.865751v-189.75413c0-162.256623-132.008243-294.253638-294.253638-294.253638h-15.135418c-162.256623 0-294.264866 131.997015-294.264867 294.253638v189.75413A186.666415 186.666415 0 0 1 121.265706 779.227019c-17.594362 10.857529-24.07295 20.974007-25.094703 23.949442z m0 0.16842z"
                fill="black"
                p-id="15330"
              ></path>
              <path
                d="M696.074755 491.238636a44.91222 44.91222 0 0 1-44.665203-40.724156c-6.961394-74.273584-56.522029-138.105077-126.270707-162.728201a44.91222 44.91222 0 0 1 29.855399-84.715676c102.680563 36.176793 175.629237 130.020877 185.846767 239.067748a44.91222 44.91222 0 0 1-40.522051 48.909408c-1.425963 0.134737-2.840698 0.190877-4.244205 0.190877z"
                fill="black"
                p-id="15331"
              ></path>
              <path d="M714.657186 572.069404m-47.404848 0a47.404848 47.404848 0 1 0 94.809697 0 47.404848 47.404848 0 1 0-94.809697 0Z" fill="#e98f36" p-id="15332"></path>
            </svg> </span
          >消息通知
        </div>
        <div @click.prevent="redirect('collect','我的收藏')">
          <div class="van-icon">
            <svg t="1657185768832" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="16554" width="200" height="200">
              <path
                d="M171.712 571.648l0.352 0.32 287.904 252.8a64 64 0 0 0 82.912 1.344l296.832-244.544a215.584 215.584 0 1 0-301.824-300.576L512 316.672l-25.888-35.616a215.584 215.584 0 1 0-314.4 290.624zM32 407.584a279.584 279.584 0 0 1 480-194.944 279.584 279.584 0 0 1 480 194.944 278.144 278.144 0 0 1-113.024 224.512l-295.36 243.392a128 128 0 0 1-165.888-2.592L129.984 620.16A278.976 278.976 0 0 1 32 407.584z"
                p-id="16555"
                fill="black"
              ></path>
            </svg>
          </div>
          我的收藏
        </div>
        <div>
        <!-- /History -->
          <div class="van-icon" @click.prevent="SetHistory">
            <svg t="1657185839571" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="17561" width="200" height="200">
              <path
                d="M511.998 64C264.574 64 64 264.574 64 511.998S264.574 960 511.998 960 960 759.422 960 511.998 759.422 64 511.998 64z m353.851 597.438c-82.215 194.648-306.657 285.794-501.306 203.579S78.749 558.36 160.964 363.711 467.621 77.917 662.27 160.132c168.009 70.963 262.57 250.652 225.926 429.313a383.995 383.995 0 0 1-22.347 71.993z"
                fill="black"
                p-id="17562"
              ></path>
              <path d="M543.311 498.639V256.121c0-17.657-14.314-31.97-31.97-31.97s-31.97 14.314-31.97 31.97v269.005l201.481 201.481c12.485 12.485 32.728 12.485 45.213 0s12.485-32.728 0-45.213L543.311 498.639z" fill="#e98f36" p-id="17563"></path>
            </svg>
          </div>
          阅读历史
        </div>
        <div @click="dynamic('showreel','我的作品')">
          <div class="van-icon">
            <svg t="1657185947015" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="24601" width="200" height="200">
              <path
                d="M642.160874 894.856008l0 11.1857q0 5.084409 0.508441 11.1857t0.508441 12.202582q-1.016882 19.320755-10.677259 42.200596t-37.116187 33.048659q-11.1857 4.067527-28.981132 11.694141t-53.386296 7.626614q-30.506455 0-50.33565-7.118173t-31.014896-9.151936q-14.236346-3.050645-22.879841-12.711023t-13.219464-21.862959-5.59285-24.913605-1.016882-22.879841l0-31.523337zM862.82423 229.815293q26.438928 62.029791 30.506455 116.94141t-6.101291 101.179742-29.489573 82.875869-40.166832 64.063555-39.14995 45.251241-25.422046 23.896723q-10.168818 9.151936-18.812314 13.727905t-15.253227 7.626614-12.711023 7.118173-12.202582 13.219464q-13.219464 19.320755-20.337637 37.624628t-12.202582 35.590864q-5.084409 14.236346-11.1857 23.388282t-13.219464 16.270109q-8.135055 8.135055-16.270109 13.219464l-223.714002 0q-8.135055-5.084409-15.253227-13.219464-7.118173-7.118173-14.236346-18.303873t-12.202582-28.472691q-10.168818-29.489573-24.913605-47.285005t-38.133069-35.082423q-16.270109-12.202582-37.116187-32.540218t-41.183714-47.793446-38.641509-61.521351-29.489573-74.740814-13.219464-86.943396 9.151936-97.112214q17.286991-81.350546 59.996028-136.770606t95.586892-88.97716 109.314796-48.301887 102.196624-14.744786q47.793446 0 99.654419 13.219464t100.16286 41.183714 88.468719 71.181728 65.588878 104.230387zM760.119166 437.259186q43.725919-177.95432-113.890765-271.507448-26.438928-16.270109-61.521351-25.422046t-71.690169-9.151936-72.707051 9.151936-64.571996 28.472691q-69.147964 47.793446-93.553128 103.721946t-22.3714 117.958292q1.016882 34.573982 11.694141 62.029791t25.422046 49.82721 30.506455 39.14995 27.96425 29.998014q25.422046 26.438928 44.7428 46.268123t30.506455 50.33565q11.1857 29.489573 35.082423 36.099305t44.234359 6.609732q26.438928 0 50.844091-11.694141t34.573982-36.099305q5.084409-14.236346 20.846077-34.573982t47.285005-56.945382q16.270109-19.320755 31.014896-33.5571t27.455809-28.472691 22.3714-31.014896 15.761668-41.183714z"
                p-id="24602"
                fill="black"
              ></path>
            </svg>
          </div>
          我的作品
        </div>
      </div>
      <div class="panel2">
        <h1>更多服务</h1>
        <div class="content">
          <div @click="redirect('feedback','用户反馈')">
            <div class="van-icon">
              <svg t="1657185982800" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5281" width="200" height="200">
                <path
                  d="M527.521137 48.558949c-246.731527 0-446.746141 200.00622-446.746141 446.727391s200.014615 446.727391 446.746141 446.727391 446.746141-200.00622 446.746141-446.727391S774.252663 48.558949 527.521137 48.558949zM527.521137 790.815123c-31.452636 0-56.950404-25.496697-56.950404-56.948013s25.497767-56.948013 56.950404-56.948013 56.950404 25.496697 56.950404 56.948013S558.973773 790.815123 527.521137 790.815123zM584.47154 549.187971c0 31.451316-25.497767 56.948013-56.950404 56.948013s-56.950404-25.496697-56.950404-56.948013L470.570733 306.138422c0-31.450293 25.497767-56.94699 56.950404-56.94699s56.950404 25.496697 56.950404 56.948013L584.47154 549.187971z"
                  p-id="5282"
                  fill="#e98f36"
                ></path>
              </svg>
            </div>
            用户反馈
          </div>
          <div @click.prevent="redirect('SmallFour','小思同学')">
            <div class="van-icon" >
              <svg t="1657186164183" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7926" width="200" height="200">
                <path
                  d="M543.744 444.416c-8.192 9.216-20.48 13.312-32.768 13.312-12.288 0-23.552-5.12-31.744-13.312-2.048-2.048-6.144-2.048-8.192 0-2.048 2.048-2.048 6.144 0 8.192 11.264 11.264 25.6 16.384 40.96 16.384s30.72-6.144 40.96-17.408c2.048-2.048 2.048-6.144 0-8.192-3.072-2.048-6.144-2.048-9.216 1.024z"
                  p-id="7927"
                  fill="#e98f36"
                ></path>
                <path
                  d="M512 0C229.376 0 0 229.376 0 512s229.376 512 512 512 512-229.376 512-512S794.624 0 512 0zM343.04 373.76c14.336-80.896 84.992-143.36 168.96-143.36s154.624 61.44 168.96 143.36c17.408 3.072 30.72 18.432 30.72 37.888 0 19.456-15.36 35.84-33.792 37.888h-3.072c-5.12 0-10.24-1.024-15.36-3.072 4.096-13.312 6.144-27.648 6.144-41.984 0-10.24-1.024-19.456-3.072-28.672-13.312-71.68-75.776-125.952-150.528-125.952-74.752 0-136.192 54.272-149.504 125.952-2.048 9.216-3.072 19.456-3.072 28.672 0 14.336 2.048 28.672 6.144 41.984-4.096 2.048-9.216 3.072-15.36 3.072h-3.072c-19.456-2.048-33.792-18.432-33.792-37.888-1.024-19.456 12.288-34.816 29.696-37.888zM624.64 398.336c0 62.464-50.176 112.64-112.64 112.64s-112.64-50.176-112.64-112.64 50.176-112.64 112.64-112.64c62.464-1.024 112.64 50.176 112.64 112.64z m75.776 374.784H323.584c-45.056 0-77.824-44.032-62.464-86.016 28.672-82.944 98.304-147.456 184.32-169.984 20.48 10.24 43.008 16.384 66.56 16.384s47.104-6.144 66.56-16.384c86.016 22.528 155.648 87.04 184.32 169.984 14.336 41.984-18.432 86.016-62.464 86.016z"
                  p-id="7928"
                  fill="#e98f36"
                ></path>
              </svg>
            </div>
            小思同学
          </div>
          <div @click.prevent="quit">
            <div class="van-icon">
            <svg t="1657187025109" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="9190" width="200" height="200"><path d="M1008 505.8z m-500.472 500.464c-250.512 0-453.56-203.016-453.56-453.56 0-189.616 116.408-351.984 281.52-419.72v0.112c4.88-1.744 10.144-2.68 15.664-2.68 25.84 0 46.936 20.992 46.936 46.896 0 20.392-13.056 37.832-31.336 44.264v0.032c-128.664 54.736-218.944 182.384-218.944 331.064 0 198.688 161.032 359.72 359.72 359.72 198.696 0 359.728-161.064 359.728-359.72 0-148.68-90.216-276.304-218.984-331.064-18.24-6.4-31.264-23.84-31.264-44.256 0-25.912 20.984-46.904 46.904-46.904 5.456 0 10.68 0.936 15.632 2.68v-0.112c165.248 67.744 281.52 230.112 281.52 419.72 0.04 250.512-203.048 453.528-453.536 453.528m0-484.824c-25.872 0-46.896-21-46.896-46.944V52.24c-0.032-25.848 21.024-46.904 46.896-46.904 25.912 0 46.904 21.032 46.904 46.904V474.472c0.008 25.936-20.984 46.968-46.904 46.968" fill="#8A8A8A" p-id="9191"></path></svg>
            </div>
            退出登陆
          </div>
        </div>
      </div>
      <!-- <van-cell  title="历史记录" icon="location-o" is-link />
      <van-cell @click.prevent="SmallFour" title="小四同学" icon="chat-o" is-link />
      <van-cell  title="退出登陆" icon="warning-o" is-link /> -->
    </div>
  </div>
</template>

<script>
import $ from 'jquery'
import { RemoveToken } from '@/utils/token'
import { Dialog } from 'vant'
import { SetStorage, RemoveSetStorage, GetStorage } from '@/utils/storage.js'
export default {
  data () {
    return {
      img: '',
      user: ''
    }
  },
  async created () {
    this.$store
      .dispatch('SetUser')
      .then((value) => {
        this.user = value.data
      })
      .catch((value) => {})
  },
  watch: {
    '$store.state.name': function (newval) {
      console.log(newval)
      this.user.name = newval
    },
    '$store.state.photo': function (newval) {
      console.log(newval)
      this.user.photo = newval
    }
  },
  methods: {
    // 动态的点击
    redirect (router, value) {
      // 动态的点击
      this.$router.push(`/User/${router}`)
      SetStorage('title', value)
    },
    dynamic (router, value) {
      console.log('作品')
      // 动态的点击
      this.$router.push(`/User/${router}`)
      SetStorage('title', value)
      this.$store.commit('SetRouter', '/production')
    },
    // // 编辑
    // Edit (event) {
    //   this.$router.push('/User/Edit')
    //   SetStorage('title', event.target.innerText)
    // },
    // // 小思同学
    // SmallFour (event) {
    //   this.$router.push('/User/SmallFour')
    //   SetStorage('title', '小思同学')
    // },
    // 退出
    quit () {
      Dialog.confirm({
        title: '确认退出?',
        message: '这就走了?不爱我了吗?'
      })
        .then(() => {
          // on confirm
          // this.$router.push()
          RemoveToken('token')
          this.$router.push('/login')
        })
        .catch(() => {
          // on cancel
        })
    },

    // 历史
    SetHistory (event) {
      this.$router.push('/User/History')
      this.$store.commit('SetRouter', '/User/History')
      SetStorage('title', '阅读历史')
    }

  }
}
</script>

<style lang="less" scoped>
.User {
  display: flex;
  height: 100%;
  width: 100%;
  flex-direction: column;
  background: #f8f8f8;
  .icon-you1 {
    font-size: 18px;
    color: #969799;
  }
  .header {
    width: 100%;
    //线性渐变
    background: linear-gradient(318deg, #b2b5db, #565482 70%, #494675);
    height: 250px;
    padding: 20px;
    box-sizing: border-box;
    display: flex;
    flex-direction: column;
    border-bottom-left-radius: 10%;
    border-bottom-right-radius: 10%;
    .headerFloot,
    .headerMain {
      flex: 0.5;
      display: flex;
      align-items: center;
    }
    .headerMain {
      justify-content: space-between;
      .edit {
        font-size: 16px;
        color: white;
      }
      .img {
        height: 70px;
        display: flex;
        justify-content: center;
        align-items: center;
        .van-image {
          background-clip: content-box;
          border: 5px solid #7674a2;
        }
        .text {
          margin-left: 10px;
          .NCB {
            width: 80px;
            color: cornflowerblue;
            background: white;
            border-radius: 5px;
            font-size: 20px;
            padding: 2px 10px;
            margin-top: 10px;
          }
        }
        div {
          color: white;
          font-size: 20px;
        }
      }
    }
    .headerFloot {
      > div {
        flex: 1;
        display: flex;
        align-content: center;
        flex-direction: column;
        text-align: center;
        color: white;
        font-size: 16px;
        justify-content: center;
      }
    }
  }
  .UserMain {
    padding: 0.53333rem;
    position: absolute;
    width: 100%;
    top: 215px;
    .panel1 {
      display: flex;
      background: white;
      padding: 20px 0;
      border-radius: 10px;

      div {
        flex: 1;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        font-size: 16px;
        .van-icon {
          font-size: 40px;
          svg {
            width: 30px;
            height: 30px;
          }
        }
      }
    }
    .panel2 {
      padding: 20px 0;
      border-radius: 10px;

      margin-top: 20px;
      background: white;

      h1 {
        font-size: 20px;
        margin-left: 10px;
      }
      .content {
        display: flex;
        font-size: 16px;
        div {
          display: flex;
          flex-direction: column;
          padding: 10px;
          padding-bottom: 5px;
          align-items: center;
          .van-icon {
            font-size: 40px;
            svg {
              width: 30px;
              height: 30px;
            }
          }
        }
      }
    }
  }
}
</style>
